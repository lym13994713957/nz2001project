"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}new(function(){function e(){_classCallCheck(this,e),this.user=$("#user"),this.pwd=$("#pwd"),this.sub=$("#login"),this.rem=$("#rember"),this.userOn=this.pwdOn=!1,this.addEvent()}return _createClass(e,[{key:"addEvent",value:function(){var t=this,n=localStorage.getItem("register")?JSON.parse(localStorage.getItem("register")):{};this.user.blur(function(){""!==this.value?/^[\w\-]{4,20}$/.test(this.value)?($(this).parent().next().html("符合要求"),t.userOn=!0):($(this).parent().next().html("请输入4~20位，包含_,字母，数字这类特殊字符"),t.userOn=!1,$(this).val("")):($(this).parent().next().html("用户名不能为空"),t.userOn=!1)}),this.pwd.blur(function(){""!==this.value?/^[\w\-]{4,20}$/.test(this.value)?($(this).parent().next().html("符合要求"),t.pwdOn=!0):($(this).parent().next().html("请输入4~20位，包含_,字母，数字这类特殊字符"),t.pwdOn=!1,$(this).val("")):($(this).parent().next().html("密码不能为空"),t.pwdOn=!1)}),$("#mpan").codeVerify({type:1,width:"190px",height:"30px",fontSize:"20px",codeLength:6,btnId:"login",ready:function(){},success:function(){var e;t.userOn&&t.pwdOn?t.user.val()in n?n[t.user.val()]===t.pwd.val()?(e={user:t.user.val()},t.rem[0].checked?$.cookie("login",JSON.stringify(e),{expires:7,path:"/"}):$.cookie("login",JSON.stringify(e),{path:"/"}),t.sub.next().html("登录成功！3秒钟后跳转到首页"),setTimeout(function(){location.href="../index.html"},3e3)):(alert("密码错误！"),t.pwd.val("")):(alert("用户名错误！"),t.user.val("")):(t.userOn||alert("用户名不正确！"),t.pwdOn||alert("密码不正确！"))},error:function(){alert("验证码不正确！"),t.userOn||alert("用户名不正确！"),t.pwdOn||alert("密码不正确！")}}),this.sub.click(function(){var e;t.userOn&&t.pwdOn&&(t.user.val()in n?n[t.user.val()]===t.pwd.val()?(e={user:t.user.val()},t.rem[0].checked?$.cookie("login",JSON.stringify(e),{expires:7,path:"/"}):$.cookie("login",JSON.stringify(e),{path:"/"}),$(this).next().html("登录成功！3秒钟后跳转到首页"),setTimeout(function(){location.href="../index.html"},3e3)):(alert("密码错误！"),t.pwd.val("")):(alert("用户名错误！"),t.user.val("")))})}}]),e}());