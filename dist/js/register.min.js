"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}new(function(){function t(){_classCallCheck(this,t),this.user=$("#user"),this.pwd=$("#pwd"),this.qrpwd=$("#qrpwd"),this.sub=$("#register"),this.agr=$("#agr"),this.userOn=this.pwdOn=this.qrpwdOn=!1,this.addEvent()}return _createClass(t,[{key:"addEvent",value:function(){var r=this,n=window.localStorage;this.user.blur(function(){""!==this.value?/^[\w\-]{4,20}$/.test(this.value)?($(this).parent().next().html("符合要求"),r.userOn=!0):($(this).parent().next().html("请输入4~20位，包含_,字母，数字这类特殊字符"),r.userOn=!1,$(this).val("")):($(this).parent().next().html("用户名不能为空"),r.userOn=!1)}),this.pwd.blur(function(){""!==this.value?/^[\w\-]{4,20}$/.test(this.value)?($(this).parent().next().html("符合要求"),r.pwdOn=!0):($(this).parent().next().html("请输入4~20位，包含_,字母，数字这类特殊字符"),r.pwdOn=!1,$(this).val("")):($(this).parent().next().html("密码不能为空"),r.pwdOn=!1)}),this.qrpwd.blur(function(){""!==r.qrpwd.val()?this.value===r.pwd.val()?($(this).parent().next().html("符合要求"),r.qrpwdOn=!0):($(this).parent().next().html("请和注册密码输入一致"),r.qrpwdOn=!1,$(this).val("")):($(this).parent().next().html("确认密码不能为空！"),r.qrpwdOn=!1,$(this).val(""))}),$("#mpan").codeVerify({type:1,width:"190px",height:"30px",fontSize:"20px",codeLength:6,btnId:"register",ready:function(){},success:function(){if(r.userOn&&r.pwdOn&&r.qrpwdOn){if(!r.agr[0].checked)return void alert("请先同意协议");var t=n.getItem("register")?n.getItem("register"):"",e=t?JSON.parse(t):{};if(r.user.val()in e)return void alert("用户名已经被注册！");e[r.user.val()]=r.pwd.val(),n.setItem("register",JSON.stringify(e)),r.sub.next().html("注册成功，3秒后跳转到登录页面"),setTimeout(function(){location.href="login.html"},3e3)}else r.userOn||alert("用户名不正确！"),r.pwdOn||alert("密码不正确！"),r.qrpwdOn||alert("第二次密码和第一次密码不同！")},error:function(){alert("验证码不正确！"),r.userOn||alert("用户名不正确！"),r.pwdOn||alert("密码不正确！"),r.qrpwdOn||alert("第二次密码和第一次密码不同！")}})}}]),t}());